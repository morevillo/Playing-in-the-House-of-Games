<!DOCTYPE html>
<html lang="en">
<head>
	<% include ../partials/head %>
</head>

<body>
	<% include ../partials/header %>

    <div class="container">

    	<div class="customload">
      		<div class="loader"></div>
      		<p>Looking for an opponent...</p>
    	</div>

    	<div class="about">
    		<div class="panel panel-info">
    			<div class="panel-heading"><h4><center>Game Overview</center></h4></div>
    			<div class="panel-body">
    				The game begins with you initially being given an $N amount of money, where your opponent will not know the amount that you have. The game will consist of <b>three</b> rounds. 

            <li>At the beginning of each round, the opposing player will not know how much money you initially have, and you will be asked to make a bet which you will offer to the opposing player.</li> 
            
            <li>The opposing player will then decide whether to accept this offer or not.</li>

            <li>If the opposing player accepts this bet, then both players win where you will keep the amount you have remaining and the opposing player will win the amount you have given.</li> 

            <li>If however the opposing player declines the offer, both players lose and receive nothing.</li>

            <li>To keep the game fair and that no bias will be made, usernames of the players you are playing against will be kept anonymous</li>
    			</div>    			
    		</div>

    		<br>

    		<a id="begin" class="btn btn-success btn-lg">Begin Game</a>

    		<br>
    		<br>

    		<div>
    			<img class="step1" src="/public/images/whole1.jpg">    			
    		</div>

    		<br>
    		<br>
    		<br>

    		<div>
    			<img class="step2" src="/public/images/winlose.jpg">
    		</div>
    	</div>

    	<hr>

      <footer>
        <p>&copy; 2016 Company, Inc.</p>
      </footer>
    </div>
	
</body>

<script type="text/javascript">
	$(document).ready(function () {
          // Hide the div
          // Show the div after 5s
          $(".customload").hide();
    });

	$('#begin').on('click', function(e){
        getOpponent();
		console.log("I GOT CLICKED");
		$(".about").hide();
        $(".customload").show();
        var temp = Math.floor((Math.random() * 7000) + 3000);
        console.log("TEMP IS: " + temp);

        setTimeout(function(){
        	window.location.href = 'game'; 
     	}, temp);
	});

    function getOpponent(){
        var opponent = "anonuser" +  Math.floor((Math.random() * 5000) + 2000);  

        $.ajax({
          type: 'POST',
          url: '/gameinfo/auth',
          data: JSON.stringify({ 
            opponent: opponent  
          }), 
          contentType: "application/json",
          dataType: "json",
          success: function(){
            // continue;
            console.log("DONE");
          },
          error: function(){
            console.log("Error adding opponent");
          }
        });
    }


	// setTimeout(function(){
 //       window.location.href = 'form2.html';
 //    }, 5000);
</script>

</html>